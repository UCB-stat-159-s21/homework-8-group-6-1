The assumptions for a permutation test are that the randomization is fair and indpendent across pairs of people involved in the study. This would be met for this test as well if it was met for the initial test if we generate the number of weeks with symptoms by adding together the values for each of the weeks for each subject.

However, this would no longer be independent if instead of adding the values, we instead increased the number of rows in the table by making each week its own row, since if a subject has the treatment in week 1, they also have it in week 2, and same for the placebo. So because of this, we have to add the values, and then the final data would no longer be simple yes or no. Thus, what we implemented here would no longer be applicable and we would instead have to do a full permutation test, similar to what we saw before with gender bias in teaching evaluations, where the data was always between 1 and 5, and here with 4 weeks of either having symptoms or not the data would always be between 0 and 4.

In summary, there is no way to take the data for number of weeks where the subject had symptoms and transform it to binary outcome, and our code currently only works with binary outcomes, but it is possible to run a permutation test on non binary outcomes, and in that case the assumptions would be met.